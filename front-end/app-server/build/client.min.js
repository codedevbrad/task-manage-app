console.log("modules working");var dropselect=document.getElementsByClassName("dropdown");if(dropselect)for(var drop=0;drop<dropselect.length;drop++)dropselect[drop].addEventListener("click",dropme);function dropme(e){(e=e.target).getElementsByClassName("menu-target")[0].classList.toggle("dropdown-open")}function CreatenewContent(e){var n=e.target.getAttribute("data-content-new"),t=document.getElementById(n);t.classList.add("newcontent-show"),t.getElementsByClassName("new-contentclose-btn")[0].addEventListener("click",function(){document.getElementById(n).classList.remove("newcontent-show")})}console.log("pusher working "),function(){if(io){var t=io.connect(),a=document.querySelector("body").getAttribute("space_id"),o=document.getElementById("team-list").getElementsByTagName("li");axios.get("/socket/required").then(function(e){var n={needed:e.data,spaceId:a};t.emit("connected",n)}).catch(function(e){console.log(e)}),t.on("testSocket",function(e){console.log(e)}),t.on("connectionIsActive",function(e){for(var n=0;n<o.length;n++){var t=String(o[n].getAttribute("data-space-member"));0<=e.logged.indexOf(t)&&o[n].classList.add(e.class)}}),t.on("connectionState",function(e){var n=e.class,t=e.user;console.log(t,n);for(var a=0;a<o.length;a++){String(o[a].getAttribute("data-space-member"))===t&&(o[a].className="",o[a].classList.add(n))}});var e=document.getElementById("space-channel");if(e){var c=e.getAttribute("channel-id"),s=document.getElementById("channel-message-form");s.getElementsByTagName("input")[0].addEventListener("click",function(e){var n=s.getElementsByTagName("textarea")[0];t.emit("channel-message",{channel:c,msg:n.value})}),t.on("memberMsg",function(e){var n=document.getElementById("channel-msg-list"),t=document.createElement("li");t.innerHTML="<span class=space-action>"+e.user+" </span> "+e.msg,n.appendChild(t)})}}}(),console.log("app-load");var load=document.getElementById("app-load");if(load){var phrases=["generating workspace members","grabbing your channels"," grabbing workspace reminders","grab a coffee and get working"];addPhrasesToLoad(phrases,function(){firstMethod().then(secondMethod).then(thirdMethod).then(finished)})}function addPhrasesToLoad(e,n){for(var t=document.getElementById("populate-load"),a=0;a<e.length;a++){var o=document.createElement("div");0==a&&o.classList.add("load-in-view"),o.innerHTML="<div class=load-left></div><div class=load-right><h2>"+e[a]+"</h2></div>",t.appendChild(o)}n()}function getData(e){var n=document.querySelector("body").getAttribute("space_id");return axios.get("/0/workspace/"+n+e).then(function(e){return e})}function animation(e){var n=document.getElementById("populate-load").childNodes[e];n.getElementsByClassName("load-left")[0].innerHTML='<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>',n.classList.add("load-in-view")}var delay=200;function firstMethod(){return new Promise(function(t,n){getData("/get/members").then(function(e){var n=e.data,a=document.getElementById("aside-team").querySelector("ul");n.forEach(function(e,n){var t=document.createElement("li");t.setAttribute("data-space-member",e.username),t.innerHTML="<span class=member-icon> </span> <p>"+e.username+"</p><span class=channel-loc>"+e.role+"</span></p>",a.appendChild(t)}),setTimeout(function(){t(),animation(0)},delay)}).catch(function(e){n("error: somethings wrong")})})}function secondMethod(e){return new Promise(function(t,n){getData("/get/channels").then(function(e){var n=e.data;console.log(n);var a=document.querySelector("body").getAttribute("space_id"),o=document.getElementById("aside-channels").querySelector("ul");n.forEach(function(e,n){var t=document.createElement("li");t.innerHTML="<span class=member-icon> </span> <a href=/0/workspace/"+a+"/channel/"+e.url+"/> # "+e.name+"</a><span class=channel-loc>"+e.tag+"</span>",console.log(o,t),o.appendChild(t)}),setTimeout(function(){t(),animation(1)},delay)}).catch(function(e){n("error: somethings wrong")})})}function thirdMethod(e){return new Promise(function(n,t){getData("/get/reminders").then(function(e){setTimeout(function(){n(),animation(2)},delay)}).catch(function(e){t("error: somethings wrong")})})}function finished(e){return new Promise(function(e,n){setTimeout(function(){e(),animation(3),setTimeout(function(){load.style.display="none"},2100)},delay)})}console.log("workspaces working");var addnewworkspace=document.getElementsByClassName("workspace-btn")[0];function toggleNew(){document.getElementsByClassName("workspace-new")[0].classList.toggle("workspace-state")}addnewworkspace&&addnewworkspace.addEventListener("click",toggleNew);var submitWorkspace=document.getElementById("workspace-enter");function submitreq(){var o=document.getElementById("workspace-name").value,c=document.getElementById("workspace-description").value;axios.post("/0/auth/workspace-new",{name:o,description:c}).then(function(e){var n=document.getElementById("workspaces-center"),t=document.createElement("section");t.classList.add("flex-each-workspace"),t.innerHTML+="<div class=workspace-flex-main><h1>"+o+"</h1><p>"+c+"</p> </div><div class=workspace-flex-following><a class=workspace-btn join-workspace href=/0/workspace/"+e.data.id+">join workspace</span>";var a=document.getElementById("no-workspace");a&&n.removeChild(a),document.getElementsByClassName("workspace-new")[0].classList.remove("workspace-state"),n.appendChild(t),document.getElementById("workspace-btnLogictoAdd").addEventListener("click",joinWorkspace)}).catch(function(e){})}submitWorkspace&&submitWorkspace.addEventListener("click",submitreq),console.log("workspace and stack working "),(newstack=document.getElementById("create-stack-btn"))&&newstack.addEventListener("click",CreatenewContent);var newstack,newchannel=document.getElementById("aside-add-channel-btn");newchannel.addEventListener("click",CreatenewContent),(newstack=document.getElementById("aside-add-member-btn")).addEventListener("click",CreatenewContent),newstack.addEventListener("click",GetAllTokens);var space=document.querySelector("body").getAttribute("space_id");function GetAllTokens(){var a=document.getElementById("member-tokens-assigned");axios.get("/0/workspace/"+space+"/getAllTokens").then(function(e){var n=e.data;console.log(n),n.forEach(function(e,n){var t=document.createElement("div");t.classList.add("token-generated"),e.claimed?t.classList.add("token-used"):t.classList.add("token-free"),t.innerHTML="<p>"+e.token+"</p>",a.appendChild(t)})}).catch(function(e){console.log(e)})}function generateToken(e){axios.get("/0/workspace/"+space+"/genToken").then(function(e){var n=e.data,t=document.getElementById("member-tokens-assigned"),a=document.createElement("div");a.classList.add("token-generated"),n.claimed?a.classList.add("token-used"):a.classList.add("token-free"),a.innerHTML="<p>"+n.token+"</p>",t.appendChild(a)}).catch(function(e){console.log(e)})}